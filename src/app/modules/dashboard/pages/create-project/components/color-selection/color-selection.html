<!-- Loading State -->
@if (isGenerating()) {
<div class="w-full min-h-[90vh] flex flex-col items-center justify-center">
  <!-- Header Section -->
  <div class="text-center mb-12">
    <h1 class="text-4xl font-bold text-white mb-4">
      Generating Color Palettes...
    </h1>
  </div>

  <!-- Loading Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
    @for (item of [1,2,3]; track item) {
    <div class="group">
      <div
        class="glass border border-gray-700/50 rounded-2xl p-8 hover:border-gray-600/50 transition-all duration-300"
      >
        <!-- Color Palette Placeholder -->
        <div
          class="w-full h-32 mb-6 glass-dark rounded-xl flex items-center justify-center relative overflow-hidden"
        >
          <div
            class="absolute inset-0 bg-gradient-to-br from-primary/10 to-secondary/10 animate-pulse"
          ></div>
          <div class="flex space-x-2">
            @for (color of [1,2,3,4]; track color) {
            <div
              class="w-12 h-12 bg-gray-700/50 rounded-full animate-pulse"
            ></div>
            }
          </div>

          <!-- Shimmer Effect -->
          <div
            class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-shimmer"
          ></div>
        </div>

        <!-- Title Placeholder -->
        <div class="space-y-3 mb-4">
          <div class="h-6 bg-gray-700/50 rounded-lg animate-pulse"></div>
          <div class="h-4 bg-gray-700/30 rounded-lg animate-pulse w-3/4"></div>
        </div>

        <!-- Progress Dots -->
        <div class="flex justify-center space-x-2">
          @for (dot of [1,2,3]; track dot) {
          <div
            class="w-2 h-2 bg-primary/60 rounded-full animate-bounce"
            [style.animation-delay]="(dot * 0.2) + 's'"
          ></div>
          }
        </div>
      </div>
    </div>
    }
  </div>

  <!-- Tips Section -->
  <div class="mt-12 text-center">
    <div
      class="bg-gray-900/30 backdrop-blur-sm border border-gray-700/30 rounded-xl p-6 max-w-2xl mx-auto"
    >
      <h3 class="text-lg font-semibold text-white mb-3">
        ðŸŽ¨ While you wait...
      </h3>
      <p class="text-gray-300 text-sm leading-relaxed">
        Our AI is analyzing your project requirements to create harmonious color
        palettes that reflect your brand's personality and target audience. This
        process ensures each palette is optimized for accessibility and visual
        impact.
      </p>
    </div>
  </div>
</div>
}

<!-- Error State -->
@if (error()) {
<div
  class="flex flex-col items-center justify-center min-h-[60vh] w-full px-4 sm:px-6 lg:px-8"
>
  <div class="text-center max-w-md mx-auto">
    <div class="mb-6">
      <div
        class="inline-flex items-center justify-center w-16 h-16 bg-red-500/20 rounded-full mb-4"
      >
        <svg
          class="w-8 h-8 text-red-400"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          ></path>
        </svg>
      </div>
      <h3 class="text-xl font-semibold text-white mb-2">Generation Failed</h3>
      <p class="text-gray-400 mb-6">{{error()}}</p>
    </div>

    <div class="flex flex-col sm:flex-row gap-3 justify-center">
      <button
        (click)="retryGeneration()"
        class="flex items-center justify-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200"
      >
        <svg
          class="w-4 h-4 mr-2"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
          ></path>
        </svg>
        Try Again
      </button>

      <button
        (click)="goToPreviousStep()"
        class="flex items-center justify-center px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-colors duration-200"
      >
        <svg
          class="w-4 h-4 mr-2"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          ></path>
        </svg>
        Go Back
      </button>
    </div>
  </div>
</div>
}

<!-- Success State - Color Selection -->
@if (!isGenerating() && !error() && hasGenerated()) {
<section
  class="min-h-[90vh] flex flex-col items-center justify-center w-full px-4"
>
  <div class="text-center mb-8">
    <h1
      class="text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold text-gray-100 mb-4 max-w-4xl"
    >
      Select Your Brand Colors
    </h1>
    <p class="text-gray-400 text-lg max-w-2xl mx-auto">
      Choose the color palette that best represents your brand's personality and
      values.
    </p>
  </div>

  <div class="w-full max-w-7xl mx-auto">
    <div
      class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6 lg:gap-8"
    >
      @for (color of colorPalettes(); track color.id) {
      <div
        class="p-4 sm:p-6 border-2 border-transparent glass hover:border-gray-600 rounded-xl hover:shadow-lg hover:shadow-primary/30 hover:bg-gray-900/50 transition-all duration-300 cursor-pointer group relative overflow-hidden hover:-translate-y-1"
        [style.boxShadow]="selectedColor() === color.id ? '0 0 15px ' + color.colors.primary : 'none'"
        [class.border-primary]="selectedColor() === color.id"
        [class.bg-gray-900]="selectedColor() === color.id"
        [style.borderColor]="selectedColor() === color.id ? color.colors.primary : ''"
        (click)="selectColor(color.id)"
      >
        <div
          class="absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-10 transition-opacity duration-300"
          [style.backgroundImage]="'linear-gradient(to bottom right, ' + color.colors.primary + ', ' + color.colors.accent + ')'"
          [class.opacity-20]="selectedColor() === color.id"
        ></div>

        <div class="relative z-10">
          <h3 class="text-white text-lg font-medium mb-3">{{ color.name }}</h3>

          <div class="flex flex-wrap gap-2 sm:gap-3 mb-4">
            <div
              class="w-6 h-6 sm:w-8 sm:h-8 rounded-full shadow-sm ring-2 ring-white/20"
              [style.backgroundColor]="color.colors.primary"
              title="Primary Color"
            ></div>
            <div
              class="w-6 h-6 sm:w-8 sm:h-8 rounded-full shadow-sm ring-2 ring-white/20"
              [style.backgroundColor]="color.colors.secondary"
              title="Secondary Color"
            ></div>
            <div
              class="w-6 h-6 sm:w-8 sm:h-8 rounded-full shadow-sm ring-2 ring-white/20"
              [style.backgroundColor]="color.colors.accent"
              title="Accent Color"
            ></div>
            <div
              class="w-6 h-6 sm:w-8 sm:h-8 rounded-full border border-gray-500 shadow-sm"
              [style.backgroundColor]="color.colors.background"
              title="Background Color"
            ></div>
          </div>

          <div
            class="mt-3 p-3 sm:p-4 rounded-lg border border-gray-600/30"
            [style.backgroundColor]="color.colors.background"
          >
            <p
              [style.color]="color.colors.text"
              class="font-medium text-sm sm:text-base mb-2"
            >
              Sample Text
            </p>
            <div class="flex flex-wrap gap-2">
              <button
                class="px-2 sm:px-3 py-1 rounded text-xs sm:text-sm font-medium transition-all hover:scale-105 shadow-sm"
                [style.backgroundColor]="color.colors.primary"
                [style.color]="'white'"
              >
                Primary
              </button>
              <button
                class="px-2 sm:px-3 py-1 rounded text-xs sm:text-sm font-medium transition-all hover:scale-105 shadow-sm"
                [style.backgroundColor]="color.colors.accent"
                [style.color]="color.colors.text"
              >
                Accent
              </button>
            </div>
          </div>

          @if (selectedColor() === color.id) {
          <div class="absolute top-2 right-2">
            <div
              class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center"
            >
              <svg
                class="w-4 h-4 text-white"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
            </div>
          </div>
          }
        </div>
      </div>
      }
    </div>

    <!-- Navigation Hint -->
    @if (selectedColor()) {
    <div class="text-center mt-8">
      <p class="text-gray-400 text-sm">
        Great choice! Your selection will automatically advance to the next
        step.
      </p>
    </div>
    }
  </div>
</section>
}
