<div
  class="template-card backdrop-blur-md rounded-xl border p-3 md:p-6 flex flex-col transition-all shadow-lg relative glass"
  [class.bg-gray-900]="tech().isAvailable"
  [class.bg-gray-900]="!tech().isAvailable"
  [class.border-gray-800]="tech().isAvailable"
  [class.border-gray-700]="!tech().isAvailable"
  [class.hover:border-primary]="tech().isAvailable"
  [class.hover:-translate-y-1]="tech().isAvailable"
  [class.cursor-pointer]="tech().isAvailable"
  [class.cursor-not-allowed]="!tech().isAvailable"
  [class.opacity-50]="!tech().isAvailable"
>
  <!-- Card Header -->
  <div class="flex items-start justify-between mb-2 md:mb-4">
    <div
      class="flex items-center"
      [class.cursor-pointer]="tech().isAvailable"
      [class.cursor-not-allowed]="!tech().isAvailable"
      (click)="selectTech()"
    >
      <!-- Icon - smaller on mobile -->
      <div
        class="w-6 h-6 md:w-12 md:h-12 rounded-xl flex items-center justify-center mr-2 md:mr-4 text-lg md:text-2xl"
        [style.background-color]="tech()!.color + '20'"
        [style.color]="tech()!.color"
      >
        <img
          src="{{ tech()!.icon }}"
          alt="{{ tech()!.name }}"
          class="w-6 h-6 md:w-12 md:h-12 rounded-lg mr-1 md:mr-3"
        />
      </div>
      <div class="flex flex-col">
        <h4 class="text-sm md:text-xl font-semibold text-white leading-tight">
          {{ tech()!.name }}
        </h4>
        @if (!tech().isAvailable) {
        <span class="text-xs text-orange-400 font-medium mt-1"
          >Available Soon</span
        >
        }
      </div>
    </div>
    <div
      class="w-5 h-5 md:w-6 md:h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0"
      [class.bg-primary]="selected() && tech().isAvailable"
      [class.border-primary]="selected() && tech().isAvailable"
      [class.border-gray-500]="!selected() && tech().isAvailable"
      [class.border-gray-600]="!tech().isAvailable"
      [class.bg-gray-700]="!tech().isAvailable"
      [class.cursor-pointer]="tech().isAvailable"
      [class.cursor-not-allowed]="!tech().isAvailable"
      (click)="selectTech()"
    >
      @if (selected()) {
      <span class="pi pi-check text-white text-xs"></span>
      }
    </div>
  </div>

  <!-- Description - hidden on mobile -->
  <p
    class="text-sm mb-4 flex-grow hidden md:block"
    [class.text-gray-300]="tech().isAvailable"
    [class.text-gray-500]="!tech().isAvailable"
    [class.cursor-pointer]="tech().isAvailable"
    [class.cursor-not-allowed]="!tech().isAvailable"
    (click)="selectTech()"
  >
    {{ tech()!.description }}
  </p>

  <!-- Badges - hidden on mobile -->
  <div
    class="hidden md:flex flex-wrap gap-2 mt-auto mb-4"
    [class.cursor-pointer]="tech().isAvailable"
    [class.cursor-not-allowed]="!tech().isAvailable"
    (click)="selectTech()"
  >
    @for (badge of tech()!.badges; track badge) {
    <span
      class="text-xs px-2 py-1 rounded-md"
      [class.bg-gray-800]="tech().isAvailable"
      [class.text-gray-300]="tech().isAvailable"
      [class.bg-gray-800]="!tech().isAvailable"
      [class.text-gray-500]="!tech().isAvailable"
      >{{ badge }}</span
    >
    }
  </div>

  <!-- Advanced Options Button -->
  @if (showAdvancedOptions() && tech()!.versions && tech()!.versions!.length >
  0) {
  <div class="mt-2 md:mt-4 pt-2 md:pt-3 border-t border-gray-800/30">
    @if (isAdvancedOptionsVisible()) {
    <div class="mb-2 md:mb-3 animate-fade-in">
      <p class="text-xs md:text-sm font-medium text-gray-300 mb-1 md:mb-2">
        Version:
      </p>
      <p-select
        [options]="tech()!.versions"
        placeholder="Select version"
        [(ngModel)]="selectedVersion"
        (onChange)="selectVersion($event.value)"
        class="w-full"
      />
    </div>
    }

    <button
      type="button"
      class="sm:outer-button w-full text-xs md:text-sm flex items-center justify-center gap-1 md:gap-2 py-1 md:py-2 px-2 md:px-3"
      (click)="toggleAdvancedOptions()"
    >
      <span class="hidden md:inline"
        >{{ isAdvancedOptionsVisible() ? 'Hide' : 'Advanced' }}</span
      >
      <span class="md:hidden"
        >{{ isAdvancedOptionsVisible() ? 'Hide' : 'Opt' }}</span
      >
      <span
        class="pi text-xs md:text-sm"
        [class.pi-angle-up]="isAdvancedOptionsVisible()"
        [class.pi-angle-down]="!isAdvancedOptionsVisible()"
      ></span>
    </button>
  </div>
  }
</div>
