@if(isLoading()){
<div class="flex justify-center items-center h-[90vh] flex-col">
  <app-loader />
  <p class="text-gray-400 text-xl">Loading project dashboard...</p>
</div>
} @else if(error()){
<div class="glass-card p-6 mx-4 my-8 border-red-500/20">
  <div class="flex items-center space-x-3">
    <i class="pi pi-exclamation-triangle text-red-400 text-2xl"></i>
    <div>
      <p class="font-bold text-red-300">Error</p>
      <p class="text-red-200">{{ error() }}</p>
    </div>
  </div>
</div>
} @else {
<div class="min-h-screen p-4 sm:p-6 lg:p-8">
  @if (project(); as currentProject) {

  <!-- Hero Section -->
  <div class="glass-card p-8 mb-8 text-center">
    <h1 class="text-4xl sm:text-5xl font-bold text-white mb-3">
      {{ currentProject.name }}
    </h1>
    <p class="text-gray-300 text-lg max-w-2xl mx-auto mb-6">
      {{ currentProject.description || "Your AI-powered project workspace" }}
    </p>
    <div class="flex justify-center items-center space-x-6 text-sm text-gray-400">
      <span class="flex items-center space-x-2">
        <i class="pi pi-calendar"></i>
        <span>{{ currentProject.createdAt | date : "MMM d, y" }}</span>
      </span>
      <span class="flex items-center space-x-2">
        <i class="pi pi-users"></i>
        <span>{{ currentProject.targets.name }}</span>
      </span>
    </div>
  </div>

  <!-- Main Workflow -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8">
    
    <!-- 1. Branding -->
    <div
      class="glass-card p-6 cursor-pointer transition-all duration-300 hover:scale-105 group relative overflow-hidden"
      [routerLink]="['/console/branding']"
    >
      <div class="absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
      <div class="relative z-10 text-center">
        <div class="w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center">
          <i class="pi pi-palette text-white text-lg"></i>
        </div>
        <h3 class="text-lg font-semibold text-white mb-2">Brand</h3>
        
        @if (currentProject.analysisResultModel!.branding.sections.length > 0) {
        <div class="flex items-center justify-center space-x-1 text-green-400 text-xs">
          <i class="pi pi-check-circle"></i>
          <span>Done</span>
        </div>
        } @else {
        <div class="flex items-center justify-center space-x-1 text-gray-400 text-xs">
          <i class="pi pi-circle"></i>
          <span>Start</span>
        </div>
        }
      </div>
    </div>

    <!-- 2. Business Plan -->
    <div
      class="glass-card p-6 cursor-pointer transition-all duration-300 hover:scale-105 group relative overflow-hidden"
      [routerLink]="['/console/business-plan']"
    >
      <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
      <div class="relative z-10 text-center">
        <div class="w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center">
          <i class="pi pi-chart-line text-white text-lg"></i>
        </div>
        <h3 class="text-lg font-semibold text-white mb-2">Business</h3>
        
        @if (currentProject.analysisResultModel!.businessPlan) {
        <div class="flex items-center justify-center space-x-1 text-green-400 text-xs">
          <i class="pi pi-check-circle"></i>
          <span>Done</span>
        </div>
        } @else {
        <div class="flex items-center justify-center space-x-1 text-gray-400 text-xs">
          <i class="pi pi-circle"></i>
          <span>Start</span>
        </div>
        }
      </div>
    </div>

    <!-- 3. System Analysis -->
    <div
      class="glass-card p-6 cursor-pointer transition-all duration-300 hover:scale-105 group relative overflow-hidden"
      [routerLink]="['/console/diagrams']"
    >
      <div class="absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
      <div class="relative z-10 text-center">
        <div class="w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center">
          <i class="pi pi-sitemap text-white text-lg"></i>
        </div>
        <h3 class="text-lg font-semibold text-white mb-2">Design</h3>
        
        @if (currentProject.analysisResultModel!.design) {
        <div class="flex items-center justify-center space-x-1 text-green-400 text-xs">
          <i class="pi pi-check-circle"></i>
          <span>Done</span>
        </div>
        } @else {
        <div class="flex items-center justify-center space-x-1 text-gray-400 text-xs">
          <i class="pi pi-circle"></i>
          <span>Start</span>
        </div>
        }
      </div>
    </div>

    <!-- 4. Development -->
    <div
      class="glass-card p-6 cursor-pointer transition-all duration-300 hover:scale-105 group relative overflow-hidden"
      [routerLink]="['/console/development']"
    >
      <div class="absolute inset-0 bg-gradient-to-br from-orange-500/10 to-red-500/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
      <div class="relative z-10 text-center">
        <div class="w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center">
          <i class="pi pi-code text-white text-lg"></i>
        </div>
        <h3 class="text-lg font-semibold text-white mb-2">Code</h3>
        
        @if (currentProject.analysisResultModel!.development) {
        <div class="flex items-center justify-center space-x-1 text-green-400 text-xs">
          <i class="pi pi-check-circle"></i>
          <span>Done</span>
        </div>
        } @else {
        <div class="flex items-center justify-center space-x-1 text-gray-400 text-xs">
          <i class="pi pi-circle"></i>
          <span>Start</span>
        </div>
        }
      </div>
    </div>

    <!-- 5. Deployment -->
    <div
      class="glass-card p-6 cursor-pointer transition-all duration-300 hover:scale-105 group relative overflow-hidden"
      [routerLink]="['/console/deployment']"
    >
      <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
      <div class="relative z-10 text-center">
        <div class="w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center">
          <i class="pi pi-cloud-upload text-white text-lg"></i>
        </div>
        <h3 class="text-lg font-semibold text-white mb-2">Deploy</h3>
        
        <div class="flex items-center justify-center space-x-1 text-gray-400 text-xs">
          <i class="pi pi-circle"></i>
          <span>Start</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Stats & Actions -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    
    <!-- Progress Overview -->
    <div class="glass-card p-6">
      <h3 class="text-lg font-semibold text-white mb-4 flex items-center space-x-2">

        <span>Progress</span>
      </h3>
      <div class="space-y-3">
        <div class="flex justify-between items-center">
          <span class="text-gray-300 text-sm">Completed</span>
          <span class="text-green-400 font-semibold">3/5</span>
        </div>
        <div class="w-full bg-gray-700 rounded-full h-2">
          <div class="bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full" style="width: 60%"></div>
        </div>
        <p class="text-gray-400 text-xs">Keep going! You're making great progress.</p>
      </div>
    </div>

    <!-- Project Info -->
    <div class="glass-card p-6">
      <h3 class="text-lg font-semibold text-white mb-4 flex items-center space-x-2">
        <span>Details</span>
      </h3>
      <div class="space-y-2 text-sm">
        <div class="flex justify-between">
          <span class="text-gray-400">Team Size</span>
          <span class="text-gray-300">{{ currentProject.teamSize || "1" }}</span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-400">Scope</span>
          <span class="text-gray-300">{{ currentProject.scope.name.toString().toLowerCase() }}</span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-400">Updated</span>
          <span class="text-gray-300">{{ currentProject.updatedAt | date : "MMM d" }}</span>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="glass-card p-6">
      <h3 class="text-lg font-semibold text-white mb-4 flex items-center space-x-2">
        <span>Actions</span>
      </h3>
      <div class="space-y-2">
        <button class="w-full outer-button text-sm py-2" [routerLink]="['/console/create-project']">
          <i class="pi pi-plus mr-2"></i>New Project
        </button>
        <button class="w-full outer-button text-sm py-2" [routerLink]="['/console/projects']">
          <i class="pi pi-list mr-2"></i>All Projects
        </button>
      </div>
    </div>
  </div>

  } @else {
  <div class="flex justify-center items-center h-64">
    <div class="glass-card p-8 text-center">
      <i class="pi pi-exclamation-circle text-gray-400 text-4xl mb-4"></i>
      <p class="text-gray-400 text-xl">No project data to display</p>
    </div>
  </div>
  }
</div>
}
